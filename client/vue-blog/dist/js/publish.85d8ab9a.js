(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["publish"],{"17fc":function(t,e,i){"use strict";var o=i("d30b"),n=i.n(o);n.a},"3bf6":function(t,e,i){},d30b:function(t,e,i){},dc7d:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"publish"},[i("blog-header"),i("div",{staticClass:"title-wrapper"},[i("panel",{directives:[{name:"show",rawName:"v-show",value:t.readyToPublish,expression:"readyToPublish"}],on:{publish:t.submit}}),i("p",{attrs:{id:"title"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{id:"title-input"},domProps:{value:t.title},on:{focus:function(e){t.titleFocus=!0},blur:function(e){t.titleFocus=!1},input:function(e){e.target.composing||(t.title=e.target.value)}}})]),i("label",{class:{focus:t.titleFocus||t.title},attrs:{for:"title-input"}}),i("span",{ref:"publishBtn",staticClass:"publish-btn",on:{click:t.handlePublishBtnClick}},[t._v("发表")])],1),i("el-tooltip",{attrs:{placement:"top end"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("dbclick here to change preview style!")]),i("editor",{ref:"tuiEditor",staticStyle:{"min-height":"500px"},attrs:{height:"100%",options:t.editorOptions,html:t.editorHtml,mode:t.editorMode,previewStyle:t.editorPreviewStyle},on:{load:t.onEditorLoad,focus:t.onEditorFocus,blur:t.onEditorBlur,change:t.onEditorChange,stateChange:t.onEditorStateChange},model:{value:t.editorText,callback:function(e){t.editorText=e},expression:"editorText"}})],1)],1)},n=[],a=i("be94"),s=(i("f751"),i("2f62")),c=i("0418"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"publish-panel"}},[i("div",{staticClass:"title"},[t._v("发布文章")]),i("div",{staticClass:"category-box"},[i("div",{staticClass:"sub-title"},[t._v("分类")]),i("div",{staticClass:"category-list"},[t._l(t.categories,function(e,o){return i("div",{key:o,staticClass:"item",class:{active:t.categoryActiveItemsIndex.includes(o)},on:{click:function(e){t.active(o,"categoryActiveItemsIndex")}}},[t._v(t._s(e))])}),i("div",{staticClass:"category-add add-btn",on:{click:function(e){t.showAddCategory=!0}}},[i("i",{staticClass:"el-icon-circle-plus-outline"})])],2),i("el-input",{directives:[{name:"show",rawName:"v-show",value:t.showAddCategory,expression:"showAddCategory"}],staticClass:"add-input",attrs:{placeholder:"请输入类别"},model:{value:t.newCategory,callback:function(e){t.newCategory=e},expression:"newCategory"}},[i("el-button",{attrs:{slot:"append",type:"success",icon:"el-icon-check",circle:""},on:{click:t.addCategory},slot:"append"})],1)],1),i("div",{staticClass:"tags-box"},[i("div",{staticClass:"sub-title"},[t._v("标签")]),i("div",{staticClass:"tags-list"},[t._l(t.tags,function(e,o){return i("div",{key:o,staticClass:"item",class:{active:t.tagActiveItemsIndex.includes(o)},on:{click:function(e){t.active(o,"tagActiveItemsIndex",!0)}}},[t._v(t._s(e))])}),i("div",{staticClass:"tags-add add-btn",on:{click:function(e){t.showAddTag=!0}}},[i("i",{staticClass:"el-icon-circle-plus-outline"})])],2),i("el-input",{directives:[{name:"show",rawName:"v-show",value:t.showAddTag,expression:"showAddTag"}],staticClass:"add-input",attrs:{placeholder:"请输入标签"},model:{value:t.newTag,callback:function(e){t.newTag=e},expression:"newTag"}},[i("el-button",{attrs:{slot:"append",type:"success",icon:"el-icon-check",circle:""},on:{click:t.addTag},slot:"append"})],1)],1),i("button",{staticClass:"publish-btn",on:{click:t.notifyParent}},[t._v("确认并发布")])])},r=[],d=(i("7f7f"),i("2909")),u=(i("6762"),i("2fdb"),i("b775")),h={name:"PublishPanel",data:function(){return{categoryActiveItemsIndex:[],tagActiveItemsIndex:[],showAddCategory:!1,showAddTag:!1,newTag:"",newCategory:""}},computed:Object(a["a"])({},Object(s["d"])(["tags","categories"])),methods:Object(a["a"])({},Object(s["c"])(["setCategories","setTags"]),{active:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this[e];if(i)return o.includes(t)?o.splice(o.indexOf(t),1):o.push(t);o.splice(0,1),o.push(t)},addCategory:function(){var t=this;console.log(this.newCategory),Object(u["b"])("/categories",{name:this.newCategory}).then(function(e){0===e.code&&(t.setCategories(Object(d["a"])(t.categories).concat([e.data.name])),t.showAddCategory=!1,t.newCategory="")}).catch(function(t){console.log(t)})},addTag:function(){var t=this;console.log(this.newTag),Object(u["b"])("/tags",{name:this.newTag}).then(function(e){0===e.code&&(t.setTags(Object(d["a"])(t.tags).concat([e.data.name])),t.showAddTag=!1,t.newTag="")}).catch(function(t){console.log(t)})},notifyParent:function(){var t=this;this.$emit("publish",{tags:this.tagActiveItemsIndex.map(function(e){return t.tags[e]}),category:this.categories[this.categoryActiveItemsIndex[0]]})}})},g=h,f=(i("eccc"),i("2877")),v=Object(f["a"])(g,l,r,!1,null,"6832712b",null),m=v.exports,p="Say what you want to say...<h3>You can also write html!!!</h3>",b=function(){},w=function(){var t=this;this.editorText===p&&(this.editorText=""),this.draftTimer||(this.draftTimer=setInterval(function(){t.editorText&&t.updateDraft()},3e3))},y=function(){this.draftTimer&&(clearInterval(this.draftTimer),this.draftTimer=null),this.updateDraft()},C=b,T=b,x=function(){var t=this,e=document.querySelector(".tui-editor-defaultUI-toolbar");e&&e.addEventListener("dblclick",function(e){return t.changePreviewStyle()})},k={onEditorBlur:y,onEditorChange:C,onEditorFocus:w,onEditorLoad:x,onEditorStateChange:T},S={data:function(){return{readyToPublish:!1,height:document.documentElement.clientHeight||window.innerHeight,titleFocus:!1,title:"",isHide:!1,tag:"",category:"",star:"0",message:"",methodNames:["focus","getValue","getHtml","getSelectedText","moveCursorToStart","moveCursorToEnd","reset"],editorText:p,editorOptions:{minHeight:"500px",useCommandShortcut:!0,hideModeSwitch:!1,usageStatistics:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},editorHtml:"",editorMode:"markdown",editorVisible:!0,editorPreviewStyle:"vertical",draftTimer:null}},computed:{},created:function(){},methods:Object.assign(k,Object(a["a"])({},Object(s["c"])(["hideLeftSide","hideRightSide","hideBothSides"]),{methodInvoke:function(t){return this.$refs.tuiEditor.invoke(t)},changePreviewStyle:function(){this.editorPreviewStyle="tab"===this.editorPreviewStyle?"vertical":"tab"},querySearchAsync:function(t,e){var i=[1,2,3,4].map(function(t){return{value:""+t}}),o=t?i.filter(this.createStateFilter(t)):i;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(o)},100)},createStateFilter:function(t){return function(e){return 0===(e.value+"").toLowerCase().indexOf(t.toLowerCase())}},handleSelectTag:function(t){console.log(t)},handleSelectCategory:function(t){console.log(t)},handleSelectStar:function(t){console.log(t)},handlePublishBtnClick:function(t){this.readyToPublish=!this.readyToPublish},submit:function(t){var e=t.category,i=t.tags;if(console.log(e),console.log(i),this.title&&this.editorText)Object(u["b"])("/posts",{title:this.title,category:e,tags:i,content:this.editorText}).then(function(t){console.log(t)}).catch(function(t){console.log(t)});else{var o=this.$createElement;this.$notify({title:"标题名称",duration:300,message:o("i",{style:"color: teal"},"这是提示文案这是提示文案这是提示文案这是提示文案这是提示文案这是提示文案这是提示文案这是提示文案")})}},updateDraft:function(){console.log("update draft")}})),mounted:function(){window.addEventListener("resize",function(){},!1)},components:{BlogHeader:c["a"],Panel:m}},I=S,A=(i("17fc"),Object(f["a"])(I,o,n,!1,null,"28797298",null));e["default"]=A.exports},eccc:function(t,e,i){"use strict";var o=i("3bf6"),n=i.n(o);n.a}}]);
//# sourceMappingURL=publish.85d8ab9a.js.map